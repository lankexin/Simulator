<?xml version="1.0" encoding="UTF-8"?>
<system name="isolette" wcet="15ms">
    <component name="Operator Interface" id="-1919443169" type="rtos" wcet="1ms">
        <linkpoint name="operator_settings" id="-1556617558" protocol="TCP" direction="out" datatype="int"/>
        <linkpoint name="operator_feedback" id="-1133628224" protocol="UDP" direction="in" datatype="boolean"/>
        <linkpoint name="nurse_input" id="-455489881" protocol="TCP" direction="in" datatype="int"/>
        <state name="Display" id="-1457315656" andstate="true" wcet="1ms" deadline="2ms">
            <state name="Idle" id="-751362724"/>
            <state name="ShowMessage" id="-53663412" wcet="0.5ms"/>
            <transition id="-190865001" event="" source="-53663412" dest="-751362724"/>
            <transition id="-1106880540" event="!(operator_feedback ~= null)" source="-751362724" dest="-53663412"/>
        </state>
        <state name="Set" id="1122966238" andstate="true" wcet="0.5ms" deadline="1ms">
            <state name="Idle" id="232888240"/>
            <state name="Setting" id="1001012748" wcet="0.2ms" entry="operator_settings = nurse_input"/>
            <state name="Invalid Input" id="1130248488" wcet="0.2ms"/>
            <transition id="-708092357" event="nurse_input ~= null" order="2" source="232888240" dest="1130248488"/>
            <transition id="314282561" event="" source="1130248488" dest="232888240"/>
            <transition id="1007765112" event="" source="1001012748" dest="232888240"/>
            <transition id="917362324" event="nurse_input > 999 & nurse_input < 10000" order="1" source="232888240" dest="1001012748"/>
        </state>
    </component>
    
    
    <component name="Alarm" id="532843875" type="rtos" wcet="2ms" period="3ms">
        <linkpoint name="cur_temperature" id="-341589476" period="3ms" protocol="TCP" direction="in" datatype="double"/>
        <linkpoint name="alarming" id="1007339507" protocol="TCP" direction="out" datatype="boolean"/>
        <state name="Alarming" id="-1159237847" wcet="0.2ms" do="" exit="" entry="alarming = 1"/>
        <state name="Checking" id="-158730137" wcet="0.5ms" do="" exit="" entry=""/>
        <state name="Fault_Invalid Data" id="-268637159" wcet="0.1ms" faultType="Invalid Data" do="" exit="report fault message" faultState="true" entry=""/>
        <state name="Format" id="96826657" wcet="0.5ms" do="" exit="validData = 1"/>
        <state name="Data Validate" id="755146393" wcet="0.1ms" do="" exit="" entry="validate thedata"/>
        <state name="Idle" id="1571525888"/>
        <transition id="1402824043" event="" source="-268637159" dest="1571525888"/>
        <transition id="1300363702" event="cur_temperature <= 10000 & cur_temperator >= 0" order="1" source="755146393" dest="96826657"/>
        <transition id="-426991351" event="cur_temperature > 10000 | cur_temperator < 0" order="2" source="755146393" dest="-268637159"/>
        <transition id="871971512" event="!(cur_temperature ~= null)" source="1571525888" dest="755146393"/>
        <transition id="596451853" event="(cur_temperature < 38) & (cur_temperature > 35)" order="1" source="-158730137" dest="-1159237847"/>
        <transition id="-933963389" event="validData" source="96826657" dest="-158730137"/>
        <transition id="1639606166" event="cur_temperature > 38 | cur_temperature < 35" order="2" source="-158730137" dest="-1159237847"/>
        <data name="validData" datatype="boolean" />
    </component>
    
    
    <component name="Heat Source" id="626103427" type="rtos" wcet="1ms">
        <linkpoint name="heat_control" id="1565048731" protocol="TCP" direction="in" datatype="boolean"/>
        <state name="Heating" id="226942970" exit="temperature = temperature+1"/>
        <state name="Idle" id="1146630959"/>
        <state name="Cooling" id="334466" exit="temperature = temperature-1"/>
        <state name="Control" id="556677"/>
        <transition id="464560146" event="heat_control ~= null]" source="1146630959" dest="556677"/>
        <transition id="-878141261" source="226942970" dest="1146630959"/>
        <transition id="-879203842" source="334466" dest="1146630959"/>
        <transition id="9999999" event="heat_control" source="556677" dest="226942970"/>
        <transition id="9999977" event="!(heat_control)" source="556677" dest="334466"/>
        <data name="temperature" datatype="double"/>
    </component>
    
    
    <component id="1274260572" name="Temperature Sensor" type="rtos" wcet="0.1ms" period="3ms">
        <linkpoint direction="out" id="-1428038840" name="cur_temperature" period="3ms" protocol="TCP" datatype="double" />
        <state do="" entry="cur_temperature = temperature" exit="" id="430596126" name="Send Data" wcet="5ms"/>
        <state id="1086683937" name="Idle"/>
        <transition dest="1086683937" event="" id="1482670472" source="430596126"/>
        <transition dest="430596126" event="" id="-1107631091" source="1086683937"/>
        <data name"temperature" datatype="double"/>
    </component>
    
    
    <component name="Thermostat" id="1497978565" type="rtos" wcet="1ms">
        <linkpoint name="heat_control" id="-416631022" protocol="TCP" direction="out" datatype="boolean"/>
        <linkpoint name="cur_temperature" id="200270917" period="3ms" protocol="TCP" direction="in" datatype="double"/>
        <linkpoint name="operator_feedback" id="572535544" protocol="UDP" direction="out" datatype="boolean"/>
        <linkpoint name="operator_settings" id="1064290397" protocol="TCP" direction="in" datatype="int"/>
        
        <state name="Checking" id="-747183443" wcet="2ms" period="3ms" deadline="2.5ms" andstate="true">
            <state name="Idle" id="-324324923"/>
            <state name="Fault_Invalid Data" id="302386967" wcet="0.1ms" faultType="Invalid Data" do="" exit="report fault message" faultState="true" entry=""/>
            <state name="Format" id="465664174" wcet="0.2ms" exit="validData = 1"/>
            <state name="Data Validate" id="1668454543" wcet="0.1ms" do="" exit="" entry="validate thedata"/>
            <state name="check" id="989773182" wcet="0.5ms"/>
            <state name="temadjust" id="1950768195" wcet="0.2ms" entry="heat_control=1"/>
            <state name="Fault" id="897392344" wcet="0.1ms"/>
            <transition id="727391730" event="cur_temperature>upper_limit | cur_temperature < lower_limit" order="1" source="989773182" dest="1950768195"/>
            <transition id="455539293" event="cur_temperature > lower_limit & cur_temperature < upper_limit" order="2" source="989773182" dest="-324324923"/>
            <transition id="488799002" event="!(cur_temperature == null)" source="-324324923" dest="1668454543"/>
            <transition id="629928812" event="cur_temperature <= 10000 & cur_temperature >= 0" order="1" source="1668454543" dest="465664174"/>
            <transition id="1409709593" event="cur_temperature > 10000 | cur_temperature < 0" order="2" source="1668454543" dest="302386967"/>
            <transition id="9803837644" event="heat_control == null" order="1" source="1950768195" dest="897392344"/>
            <transition id="881930473" order="2" source="1950768195" dest="-324324923"/>
            <transition id="9803837644" source="897392344" dest="-324324923"/>
            <transition id="998373912" source="302386967" dest="-324324923"/>
            <transition id="998373912" event="validData" source="465664174" dest="989773182"/>
        </state>
        
        <state name="SetTemRange" id="-987266327" wcet="0.5ms" deadline = "0.8ms" andstate="true">
            <state name="Idle" id="-1513741916"/>
            <state name="Setting" id="-1495286956" wcet="0.3ms" entry="upper_limit = operator_settings/100;lower_limit = operator_settings%100"/>
            <state name="Feedback" id="961907429" wcet="0.1ms" entry="operator_feedback = 1"/>
            <transition id="-682470957" event="!(operator_settings == null)" source="-1513741916" dest="-1495286956"/>
            <transition id="-821727200" source="961907429" dest="-1513741916"/>
            <transition id="580123564" source="-1495286956" dest="961907429"/>
        </state>
        
        <data name="upper_limit" initvalue="0" datatype="int"/>
        <data name="lower_limit" initvalue="0" datatype="int"/>
        <data name="validData" initvalue="0" datatype="boolean"/>
    </component>
    
    
    <communicationchannel name="linkinslk" id="-574486868" type="sync" source="-1428038840" dest="1007339507"/>
    <communicationchannel name="linkinslk" id="508021209" type="sync" source="-416631022" dest="1565048731"/>
    <communicationchannel name="linkinslk" id="715637894" type="sync" source="572535544" dest="-1556617558"/>
    <communicationchannel name="linkinslk" id="983883652" type="sync" source="-1428038840" dest="-416631022"/>
    <communicationchannel name="linkinslk" id="1330805022" type="sync" source="-1556617558" dest="572535544"/>
</system>
